
<!DOCTYPE html>
<html>
<head>
<link href="style.css" rel="stylesheet">

<h1 id="output"></h1>
<button id ="button1" onclick="myFunction(1)" class = "styled">Latte</button>
<button id ="button2" onclick="myFunction(2)" class = "styled">Cappuchino</button>
<button id ="button3" onclick="myFunction(3)" class = "styled">Cortado</button>
<button id = "back" onclick="back()" class = "styled2">Back</button>
<button id = "restart" onclick="restart()" class = "styled3">Restart</button>

</head>
<body>

<script>
//Welcome message 
var welcomeFunction = confirm("Welcome to Cofee Making Game! Would you like to start?");

//Create a time counting function
//var timer = setTimeout(delayedGreeting, 5000);
//console.log("Start counting");

function delayedGreeting(){
  var confirmation = confirm("Welcome to Cofee Making Game! Would you like to start?");
  if (confirmation) {
  alert("Let's GO!");
  }
  else {
  alert("Ok, see you next time!");
  }
}

function stopTimer(){
  //Stop the timer
  clearTimeout(timer);
  console.log("Timer has stopped");
  alert("It takes too long to wait! Hurry up next time!")
}

// Create variables in array
var coffee = ["Latte", "Cappuchino", "Cortado"];


//Create questions for caffee
var questionsCoffee =[
  "Please choose a coffee you want to make: ",
  "1. What size would you like?",
  "2. How many grams of espresso you should grind?",
  "3. How much milk would you like to add?",
  "4. How long will you heat the milk?",
  "5. How much foam you should get?"
]
console.log('test');
var answers = [
  ["Small", "Standart"],
  ["9g", "18g", "36g"],
  ["50ml", "100ml", "150ml"],
  ["10s","15s", "20s" ],
  ["1-2 cm", "2-3 cm", "3-4 cm"]
]
//console.log(answers);


//These are the right array for the perfect drink.
var smallLatte = [1, 1, 2, 2, 2, 1];
var bigLatte = [1, 2, 3, 3, 3, 1];
var cappuchino = [2, 1, 3, 2, 2, 2];
var cortado = [3, 2, 1, 1, 1, 1];


//Store input in an array
var input = [];
console.log(input);

//Create variables to the buttons
var myButton1 = document.getElementById("button1");
var myButton2 = document.getElementById("button2");
var myButton3 = document.getElementById("button3");
var myButton4 = document.getElementById("back");
var myButton5 = document.getElementById("restart");

//// Finding the output element on the screen
var output = document.getElementById("output");

//Create variable for collecting the questions in an array
//This gives the general question because 0 is my first question on coffeequestions
var index = 0;  
output.innerText = questionsCoffee[index];
console.log ("Output updated!");
myButton4.style.visibility = "hidden";
myButton5.style.visibility = "hidden";

// These three lines are causing an error so the program STOPS!
// myButton1.innerText = Latte[0];
// myButton2.innerText = Cappuchino[1];
// myButton3.innerText = Frapino[2];

// create back funktion WORKING ONLY WITH QUESTIONS NOT ANSWERS!!!!!!
function back(){
  //stop Timer;
  //if the index is on the first question or above
  if (index > 1){
    // Then we can reduce the index
    index--;
  }
  // Check to make sure the index is valid
  console.log(index);
  // Update the screen with the previous question and buttons
  updateScreen();
 
}

function restart() {
  // Reset the index to 1
  index = 1;
  // Update the display
  updateScreen();
}

function updateScreen(){
  if (index == 1){
  output.innerText = questionsCoffee[index];
  myButton1.innerText = answers[0][0]; // [0] first answers line [0] answer smalll
  myButton2.innerText = answers[0][1];
  myButton3.style.visibility = "hidden";
  myButton4.style.visibility = "visible";
  myButton5.style.visibility = "visible";

  //output.innerText = questionsFrapino[index];
  //myButton1.innerText = answers2[0][0];
  //myButton2.innerText = answers2[0][1];
  //myButton3.style.visibility = "hidden";
  }
  //console.log ("works 1");

  if (index == 2){
  output.innerText = questionsCoffee[index];
  myButton1.innerText = answers[1][0];
  myButton2.innerText = answers[1][1];
  myButton3.style.visibility = "visible";
  myButton3.innerText = answers[1][2];

  }

  if (index == 3){
  output.innerText = questionsCoffee[index];
  myButton1.innerText = answers[2][0];
  myButton2.innerText = answers[2][1];
  myButton3.innerText = answers[2][2];

  }
  //console.log ("works 3");

  if (index == 4){
  output.innerText = questionsCoffee[index];
  myButton1.innerText = answers[3][0];
  myButton2.innerText = answers[3][1];
  myButton3.innerText = answers[3][2];

  }

  if (index == 5){
  output.innerText = questionsCoffee[index];
  myButton1.innerText = answers[4][0];
  myButton2.innerText = answers[4][1];
  myButton3.innerText = answers[4][2];
  }
}

function myFunction(reference) {
  console.log("BUTTON PUSHED! = " + reference);
  // Store the reference to which button was pushed
  // this line is showing that input is what user chooses. index is the question
  // and references is to collect everything into array

  input[index] = reference;
  console.log(input);
  index++;
  
  updateScreen();
  
  //These are the right answers for the perfect coffee
  //Input 0 is my first question which drink I choose
  // index 6 is kai einam per pirmus 5 klausimus, 6 duoda ats apibendrinimus
  if(index == 6) {
    if (input[0] == 1 && input[1] == 1) {
      console.log("This is a small latte.")
      this.validate(smallLatte);
    }
    if (input[0] == 1 && input[1] == 2) {
      console.log("This is a big latte.")
      this.validate(bigLatte);
    }
    if (input[0] == 2) {
      console.log("This is a cappuchino.")
      this.validate(cappuchino);
    }
    if (input[0] == 3 ) {
      console.log("This is a Cortado.")
      this.validate(cortado);
    }

  }
}

//Pushing the wrong anwers in problem array
function validate(correctAnswers) {
  
  var problem = [];
  var message = [];
  console.log(correctAnswers);
  for (var i = 0; i < input.length; i++) {
      if (input[i] != correctAnswers[i]) {
        problem.push(i);
      }
  }
console.log(problem);
//Pushing the messages into mesage array
//if the is 0 problem, I win the game
//problem checks for right answers from the answer array and then from validate funktion
//and collect all the problems
  if (problem.length < 1) {
    alert("WOW! You are a Master Barista!");
  } else {
    if (problem.includes(2)) {
    message.push(" Your coffee is too weak or too strong;")
  }
  if (problem.includes(3)) {
    message.push("\ntoo much or not enough milk")
  }
  if (problem.includes(4)) {
    message.push("\n heat milk problem")
  }
  if (problem.includes(5)) {
    message.push("\n foam problem.")
  }


  //Giving the final answer about made coffee
  alert('You have where to improve! Here is what is wrong with your coffee: \n' + message);
  }
  

  return message;
}

</script>
</body>
</html>
